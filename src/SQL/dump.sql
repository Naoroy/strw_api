CREATE DATABASE IF NOT EXISTS test_strw;
USE test_strw;

CREATE TABLE IF NOT EXISTS user(
  id SMALLINT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(30) NOT NULL,
  mail VARCHAR(50) NOT NULL,
  password VARCHAR(120) NOT NULL,
  is_admin BOOLEAN NOT NULL DEFAULT FALSE,
  UNIQUE KEY unique_mail (mail)
) ENGINE = InnoDB;
CREATE TABLE IF NOT EXISTS item(
  id SMALLINT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(30) NOT NULL,
  price SMALLINT UNSIGNED NOT NULL,
  stock SMALLINT UNSIGNED
) ENGINE = InnoDB;
CREATE TABLE IF NOT EXISTS user_purchase(
  id SMALLINT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
  purchased BOOLEAN NOT NULL DEFAULT FALSE,
  purchase_date DATE,
  user_id SMALLINT UNSIGNED NOT NULL,
  item_id SMALLINT UNSIGNED NOT NULL,
  CONSTRAINT FK_user_cart FOREIGN KEY (user_id)
  REFERENCES user(id) ON UPDATE CASCADE,
  CONSTRAINT FK_item_cart FOREIGN KEY (item_id)
  REFERENCES item(id) ON UPDATE CASCADE
) ENGINE = InnoDB;

SHOW COLUMNS FROM user;
SHOW COLUMNS FROM item;
SHOW COLUMNS FROM user_purchase;
